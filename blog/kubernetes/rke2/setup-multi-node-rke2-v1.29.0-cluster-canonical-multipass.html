<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Multi Node RKE2 v1.29.0 with Canonical Multipass | kaiwedekind.dev</title>
    <meta name="description" content="Setup a Multi Node RKE2 v1.29.0 cluster with Canonical Multipass">
    <meta name="generator" content="VitePress v1.0.0-rc.32">
    <link rel="preload stylesheet" href="/assets/style.ZudF8-RZ.css" as="style">
    
    <script type="module" src="/assets/app.7hIBxom-.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.E9w9IFh5.js">
    <link rel="modulepreload" href="/assets/chunks/theme.-_uaQtpJ.js">
    <link rel="modulepreload" href="/assets/blog_kubernetes_rke2_setup-multi-node-rke2-v1.29.0-cluster-canonical-multipass.md.TzA5BMCU.lean.js">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicons/site.webmanifest">
    <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/assets/favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#5bbad5">
    <meta name="msapplication-config" content="/assets/favicons/browserconfig.xml">
    <meta name="theme-color" content="#1B1B1F">
    <meta name="google-adsense-account" content="ca-pub-1411508080869298">
    <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="kaiwedekind" data-description="Support me on Buy me a coffee!" data-message="" data-color="#6324DF" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-30Q0ZH1PYK"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("consent","default",{analytics_storage:"denied"}),gtag("config","G-30Q0ZH1PYK",{anonymize_ip:!0,page_path:window.location.pathname});</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-d83f3580><div class="container" data-v-d83f3580><div class="title" data-v-d83f3580><div class="VPNavBarTitle has-sidebar" data-v-d83f3580 data-v-86d1bed8><a class="title" href="/" data-v-86d1bed8><!--[--><!--]--><!----><!--[-->kaiwedekind.dev<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-d83f3580><div class="curtain" data-v-d83f3580></div><div class="content-body" data-v-d83f3580><!--[--><!--]--><div class="VPNavBarSearch search" data-v-d83f3580><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-d83f3580 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>About me</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-d83f3580 data-v-74abcbb9 data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-9c007e85><span class="text" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-9c007e85><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg><!----><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><div class="items" data-v-74abcbb9><p class="title" data-v-74abcbb9>English</p><!--[--><div class="VPMenuLink" data-v-74abcbb9 data-v-43f1e123><a class="VPLink link" href="/de/blog/kubernetes/rke2/setup-multi-node-rke2-v1.29.0-cluster-canonical-multipass.html" data-v-43f1e123><!--[-->German<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-d83f3580 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-cbbe1149 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-cbbe1149><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-cbbe1149><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-d83f3580 data-v-d0bd9dde data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><div class="group translations" data-v-d0bd9dde><p class="trans-title" data-v-d0bd9dde>English</p><!--[--><div class="VPMenuLink" data-v-d0bd9dde data-v-43f1e123><a class="VPLink link" href="/de/blog/kubernetes/rke2/setup-multi-node-rke2-v1.29.0-cluster-canonical-multipass.html" data-v-43f1e123><!--[-->German<!--]--></a></div><!--]--></div><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-cbbe1149 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-cbbe1149><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-cbbe1149><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-d83f3580 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-5a346dfe data-v-f84a0989><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f84a0989><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-f84a0989><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-f84a0989>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f84a0989 data-v-1c15a60a><button data-v-1c15a60a>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-7f44e717><div class="curtain" data-v-7f44e717></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-7f44e717><span class="visually-hidden" id="sidebar-aria-label" data-v-7f44e717> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-7f44e717><section class="VPSidebarItem level-0 collapsible collapsed" data-v-7f44e717 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Virtualization</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/virtualization/getting-started/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/virtualization/lxd/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>LXD</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/virtualization/multipass/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Multipass</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/virtualization/firecracker/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Firecracker</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-7f44e717><section class="VPSidebarItem level-0 collapsible has-active" data-v-7f44e717 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Kubernetes</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/kubernetes/getting-started/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Getting Started</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible has-active" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>RKE2</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/kubernetes/rke2/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/kubernetes/rke2/setup-multi-node-rke2-v1.29.0-cluster-canonical-multipass.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Setup Multi Node RKE2 v1.29.0 cluster with Canonical Multipass</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/kubernetes/k3s/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>K3s</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/kubernetes/kubeadm/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>kubeadm</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/kubernetes/minikube/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>minikube</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-7f44e717><section class="VPSidebarItem level-0 collapsible collapsed" data-v-7f44e717 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Linux</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/linux/getting-started/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/linux/ubuntu/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Ubuntu</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/linux/raspberrypi/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Raspberry Pi</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-7f44e717><section class="VPSidebarItem level-0 collapsible collapsed" data-v-7f44e717 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Cloud Computing</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/cloud-computing/getting-started/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Getting Started</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-7f44e717><section class="VPSidebarItem level-0 collapsible collapsed" data-v-7f44e717 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>DevSecOps</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/devsecops/getting-started/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Getting Started</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-7f44e717><section class="VPSidebarItem level-0 collapsible collapsed" data-v-7f44e717 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>AI</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/blog/ai/getting-started/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Getting Started</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-7f44e717><section class="VPSidebarItem level-0 collapsible collapsed" data-v-7f44e717 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>Scripts</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e31bd47b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-e31bd47b><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/scripts/" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Overview</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-7f44e717><section class="VPSidebarItem level-0" data-v-7f44e717 data-v-e31bd47b><!----><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/about.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>About me</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-d330b1bb><div class="content" data-v-d330b1bb><div class="outline-marker" data-v-d330b1bb></div><div class="outline-title" role="heading" aria-level="2" data-v-d330b1bb>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-d330b1bb><span class="visually-hidden" id="doc-outline-aria-label" data-v-d330b1bb> Table of Contents for current page </span><ul class="root" data-v-d330b1bb data-v-d0ee3533><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _blog_kubernetes_rke2_setup-multi-node-rke2-v1_29_0-cluster-canonical-multipass" data-v-6b87e69f><div><h1 id="setup-a-multi-node-rke2-v1-29-0-cluster-with-canonical-multipass" tabindex="-1">Setup a Multi Node RKE2 v1.29.0 cluster with Canonical Multipass <a class="header-anchor" href="#setup-a-multi-node-rke2-v1-29-0-cluster-with-canonical-multipass" aria-label="Permalink to &quot;Setup a Multi Node RKE2 v1.29.0 cluster with Canonical Multipass&quot;">​</a></h1><h2 id="what-is-a-multi-node-cluster" tabindex="-1">What is a Multi Node Cluster <a class="header-anchor" href="#what-is-a-multi-node-cluster" aria-label="Permalink to &quot;What is a Multi Node Cluster&quot;">​</a></h2><p>A multi-node cluster refers to a computing cluster that consists of multiple interconnected nodes or servers that work together to achieve a common computing goal. In the context of technologies like Kubernetes, a multi-node cluster typically refers to a cluster of machines that collectively form a distributed computing environment for running containerized applications.</p><h3 id="key-concepts" tabindex="-1">Key concepts <a class="header-anchor" href="#key-concepts" aria-label="Permalink to &quot;Key concepts&quot;">​</a></h3><ol><li><p>Node: In a cluster, a node is an individual computing unit, which could be a physical server or a virtual machine. Each node contributes resources such as CPU, memory, storage, and network connectivity to the overall cluster.</p></li><li><p>Cluster: A cluster is a group of interconnected nodes that work together as a single system. In the context of Kubernetes, a cluster is used to deploy, manage, and scale containerized applications.</p></li><li><p>Multi-Node Cluster: A multi-node cluster, in the context of Kubernetes or other container orchestration systems, means that the cluster spans across multiple nodes. This allows for the distribution of workloads and provides high availability and scalability. In a multi-node cluster, nodes collaborate to deploy and manage containers, ensuring that applications can run on multiple machines and handle increased workloads.</p></li><li><p>High Availability: One of the advantages of a multi-node cluster is the ability to achieve high availability. If one node fails, the workloads can be distributed across the remaining nodes, ensuring that applications continue to run without disruption.</p></li><li><p>Scalability: Multi-node clusters can be easily scaled by adding more nodes to the cluster. This allows organizations to adapt to changing resource requirements and accommodate the growth of their applications.</p></li></ol><p>In summary, a multi-node cluster in the context of Kubernetes or similar container orchestration platforms refers to a distributed system where multiple nodes work together to provide a resilient, scalable, and highly available environment for running containerized applications.</p><h2 id="pre-requisite" tabindex="-1">Pre-requisite <a class="header-anchor" href="#pre-requisite" aria-label="Permalink to &quot;Pre-requisite&quot;">​</a></h2><h3 id="install-multipass" tabindex="-1">Install Multipass <a class="header-anchor" href="#install-multipass" aria-label="Permalink to &quot;Install Multipass&quot;">​</a></h3><p>Follow installation instructions to install Multipass, if you haven&#39;t yet: <a href="https://multipass.run/install" target="_blank" rel="noreferrer">https://multipass.run/install</a></p><h3 id="launch-multipass-vm-instances" tabindex="-1">Launch Multipass VM instances <a class="header-anchor" href="#launch-multipass-vm-instances" aria-label="Permalink to &quot;Launch Multipass VM instances&quot;">​</a></h3><p>Ubuntu 23.04 VM Machines</p><h3 id="launch-controller-instances" tabindex="-1">Launch Controller instances <a class="header-anchor" href="#launch-controller-instances" aria-label="Permalink to &quot;Launch Controller instances&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cpus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GB</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">G</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cpus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GB</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">G</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cpus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GB</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">G</span></span></code></pre></div><h3 id="launch-worker-instances" tabindex="-1">Launch Worker instances <a class="header-anchor" href="#launch-worker-instances" aria-label="Permalink to &quot;Launch Worker instances&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cpus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GB</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">G</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cpus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GB</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">G</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cpus</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">GB</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">G</span></span></code></pre></div><h3 id="verify-multipass-instances" tabindex="-1">Verify Multipass instances <a class="header-anchor" href="#verify-multipass-instances" aria-label="Permalink to &quot;Verify Multipass instances&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span></span></code></pre></div><p><em>Output:</em></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    State</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             IPv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             Image</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.205.2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Ubuntu</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-controller-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.205.3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Ubuntu</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-controller-3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.205.4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Ubuntu</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-worker-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.205.5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Ubuntu</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-worker-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.205.6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Ubuntu</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-worker-3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           Running</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.205.7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    Ubuntu</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23.04</span></span></code></pre></div><h2 id="install-first-rke2-controller" tabindex="-1">Install first rke2 controller <a class="header-anchor" href="#install-first-rke2-controller" aria-label="Permalink to &quot;Install first rke2 controller&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span></code></pre></div><h3 id="download-installation-script" tabindex="-1">Download Installation script <a class="header-anchor" href="#download-installation-script" aria-label="Permalink to &quot;Download Installation script&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sfL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://get.rke2.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-install.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-install.sh</span></span></code></pre></div><h3 id="configure-network-service" tabindex="-1">Configure network service <a class="header-anchor" href="#configure-network-service" aria-label="Permalink to &quot;Configure network service&quot;">​</a></h3><p><em>Enable the recommended IPv4 and/or IPv6 forwarding settings in the sysctl configuration files. Create a file named 90-rke2.conf in the /etc/sysctl.d/ directory</em></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.d/90-rke2.conf</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.conf.all.forwarding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv6.conf.all.forwarding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span></code></pre></div><h3 id="install-rke2-server" tabindex="-1">Install RKE2 server <a class="header-anchor" href="#install-rke2-server" aria-label="Permalink to &quot;Install RKE2 server&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_TYPE=server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_CHANNEL=latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_VERSION=v1.29.0+rke2r1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./rke2-install.sh</span></span></code></pre></div><p><em>All-in-one command</em></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sfL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://get.rke2.io</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_TYPE=server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_CHANNEL=latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_VERSION=v1.29.0+rke2r1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span></code></pre></div><h3 id="configure-the-rke2-server-service" tabindex="-1">Configure the rke2-server service <a class="header-anchor" href="#configure-the-rke2-server-service" aria-label="Permalink to &quot;Configure the rke2-server service&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rancher/rke2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rancher/rke2/config.yaml</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write-kubeconfig-mode:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;0644&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tls-san:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.74</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.10.200</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disable:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-ingress-nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node-taint:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CriticalAddonsOnly=true:NoExecute&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cni:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> calico</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disable-cloud-controller:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div><h3 id="start-the-service" tabindex="-1">Start the service <a class="header-anchor" href="#start-the-service" aria-label="Permalink to &quot;Start the service&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-server</span></span></code></pre></div><h3 id="confirm-status-of-the-service-after-starting-it" tabindex="-1">Confirm status of the service after starting it <a class="header-anchor" href="#confirm-status-of-the-service-after-starting-it" aria-label="Permalink to &quot;Confirm status of the service after starting it&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-server</span></span></code></pre></div><p>Output:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">●</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-server.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Rancher</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Engine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (server)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Loaded:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/usr/local/lib/systemd/system/rke2-server.service; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preset:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Active:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (running) since Sat 2023-12-23 14:53:15 CET; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">10s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       Docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/rancher/rke2#readme</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   Main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2637</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rke2)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      Tasks:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 78</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Memory:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 859.9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">M</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        CPU:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">min</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 49.718</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     CGroup:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /system.slice/rke2-server.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2637</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/usr/local/bin/rke2 server&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2652</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/agent/etc/containerd/config.toml</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/containerd/containerd.sock</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/containerd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/li</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2662</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubelet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --volume-plugin-dir=/var/lib/kubelet/volumeplugins</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --file-check-frequency=5s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --sync-frequency=30s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --address=0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous-auth=false</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --au</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2707</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aede11a9b6ce6dad3ec51d13aef7d26d74a527f306dc1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2793</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ac6e3e2b532779a8175f19dc34352a561b4c5c086f6a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">1&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2881</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">a48d6d9d6efaf446e450a5cde2fe3b58bd710bf2d3fb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">0&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             └─2882</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">d3aed5efe9e33a5f40cccf36b614641813652ec3c188</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 14</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:53:17</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2637</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T14:53:17+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;Cluster dns configmap has been set successfully&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 14</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:53:17</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2637</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T14:53:17+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;error syncing &#39;kube-system/rke2-calico&#39;: handler helm-controller-chart-regi&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 14:53:18 rke2-controller-1 rke2[2637]: time=&quot;2023-12-23T14:53:18+01:00&quot; level=info msg=&quot;Reconciling</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ConfigMap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> data&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 14:53:19 rke2-controller-1 rke2[2637]: time=&quot;2023-12-23T14:53:19+01:00&quot; level=error msg=&quot;error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> syncing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;kube-system/rke2-metrics-server&#39;:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> handler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> helm-controller-c</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 14</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:53:19</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2637</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T14:53:19+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;error syncing &#39;kube-system/rke2-calico-crd&#39;: handler helm-controller-chart-&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 14:53:19 rke2-controller-1 rke2[2637]: time=&quot;2023-12-23T14:53:19+01:00&quot; level=error msg=&quot;error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> syncing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;kube-system/rke2-coredns&#39;:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> handler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> helm-controller-chart-re</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 14</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:53:19</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2637</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T14:53:19+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;error syncing &#39;kube-system/rke2-snapshot-controller-crd&#39;: handler helm-cont&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 14:53:20 rke2-controller-1 rke2[2637]: time=&quot;2023-12-23T14:53:20+01:00&quot; level=info msg=&quot;Running</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kube-proxy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cluster-cidr=10.42.0.0/16</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --conntrack-max-per-core=0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 14</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:53:21</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2637</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T14:53:21+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;error syncing &#39;kube-system/rke2-snapshot-controller&#39;: handler helm-controll&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 14:53:21 rke2-controller-1 rke2[2637]: time=&quot;2023-12-23T14:53:21+01:00&quot; level=error msg=&quot;error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> syncing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;kube-system/rke2-snapshot-validation-webhook&#39;:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> handler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> helm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">-</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><h3 id="update-path-with-rke2-binaries" tabindex="-1">Update path with rke2 binaries <a class="header-anchor" href="#update-path-with-rke2-binaries" aria-label="Permalink to &quot;Update path with rke2 binaries&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;export KUBECONFIG=/etc/rancher/rke2/rke2.yaml&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;export PATH=${PATH}:/var/lib/rancher/rke2/bin&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;alias k=kubectl&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="check-controller-node" tabindex="-1">Check controller node <a class="header-anchor" href="#check-controller-node" aria-label="Permalink to &quot;Check controller node&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Wait for node to be ready</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wait</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --for=condition=Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --timeout=600s</span></span></code></pre></div><h3 id="obtain-token" tabindex="-1">Obtain token <a class="header-anchor" href="#obtain-token" aria-label="Permalink to &quot;Obtain token&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/server/node-token</span></span></code></pre></div><p>Output</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">K100f5da8c469a178e8dc6c666ea0adf4c53beb16044ab38bad7f567dd807865be8::server:f11cfbbe06e12b28c57f3db2351046c2</span></span></code></pre></div><h3 id="leave-controller-machine" tabindex="-1">Leave controller machine <a class="header-anchor" href="#leave-controller-machine" aria-label="Permalink to &quot;Leave controller machine&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span></span></code></pre></div><h2 id="set-up-additional-controller-nodes" tabindex="-1">Set up additional controller nodes <a class="header-anchor" href="#set-up-additional-controller-nodes" aria-label="Permalink to &quot;Set up additional controller nodes&quot;">​</a></h2><p>Repeat the following steps for <code>rke2-controller-2</code> and <code>rke2-controller-3</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-2</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span></code></pre></div><h3 id="download-installation-script-1" tabindex="-1">Download Installation script <a class="header-anchor" href="#download-installation-script-1" aria-label="Permalink to &quot;Download Installation script&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sfL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://get.rke2.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-install.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-install.sh</span></span></code></pre></div><h3 id="configure-network-service-1" tabindex="-1">Configure network service <a class="header-anchor" href="#configure-network-service-1" aria-label="Permalink to &quot;Configure network service&quot;">​</a></h3><p><em>Enable the recommended IPv4 and/or IPv6 forwarding settings in the sysctl configuration files. Create a file named 90-rke2.conf in the /etc/sysctl.d/ directory</em></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.d/90-rke2.conf</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.conf.all.forwarding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv6.conf.all.forwarding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span></code></pre></div><h3 id="install-rke2-server-1" tabindex="-1">Install RKE2 server <a class="header-anchor" href="#install-rke2-server-1" aria-label="Permalink to &quot;Install RKE2 server&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_TYPE=server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_CHANNEL=latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_VERSION=v1.29.0+rke2r1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./rke2-install.sh</span></span></code></pre></div><p><em>All-in-one command</em></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sfL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://get.rke2.io</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_TYPE=server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_CHANNEL=latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_VERSION=v1.29.0+rke2r1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span></code></pre></div><h3 id="configure-the-rke2-server-service-1" tabindex="-1">Configure the rke2-server service <a class="header-anchor" href="#configure-the-rke2-server-service-1" aria-label="Permalink to &quot;Configure the rke2-server service&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rancher/rke2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rancher/rke2/config.yaml</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://192.168.205.2:9345</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">token:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> K100f5da8c469a178e8dc6c666ea0adf4c53beb16044ab38bad7f567dd807865be8::server:f11cfbbe06e12b28c57f3db2351046c2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write-kubeconfig-mode:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;0644&quot;</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tls-san:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.205.3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disable:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-ingress-nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node-taint:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;CriticalAddonsOnly=true:NoExecute&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cni:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> calico</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disable-cloud-controller:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre></div><h3 id="start-the-service-1" tabindex="-1">Start the service <a class="header-anchor" href="#start-the-service-1" aria-label="Permalink to &quot;Start the service&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-server</span></span></code></pre></div><h3 id="confirm-status-of-the-service-after-starting-it-1" tabindex="-1">Confirm status of the service after starting it <a class="header-anchor" href="#confirm-status-of-the-service-after-starting-it-1" aria-label="Permalink to &quot;Confirm status of the service after starting it&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-server</span></span></code></pre></div><p>Output:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">●</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-server.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Rancher</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Engine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (server)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Loaded:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/usr/local/lib/systemd/system/rke2-server.service; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preset:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Active:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (running) since Sat 2023-12-23 15:37:33 CET; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">11s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       Docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/rancher/rke2#readme</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   Main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5391</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rke2)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      Tasks:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 90</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Memory:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">G</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        CPU:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">min</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.283</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     CGroup:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /system.slice/rke2-server.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─5391</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/usr/local/bin/rke2 server&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─5401</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/agent/etc/containerd/config.toml</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/containerd/containerd.sock</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/containerd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/agent/containerd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─5593</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubelet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --volume-plugin-dir=/var/lib/kubelet/volumeplugins</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --file-check-frequency=5s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --sync-frequency=30s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --address=0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --anonymous-auth=false</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --authentication-token-webhook=true</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --authoriza</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─5630</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 48</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">d9abb84978b07850a245847ed48bc3a885bc7bd7adff325a13ac8ed8cae1d2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/conta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─5716</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">c1aa4021549a851aef44ee57bee97d28dc2f6f3e6d9a96ed943838d462957fa</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/conta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─5810</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1986793</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cd1840d812a807329e84fb4036cfb0c6802d1fc7ae6840e2c14280269</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/conta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─5811</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 66</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">effca73a55fc2f05f81d250f13cb9a176030ea059ab43723a214b4f8079b8f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/conta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             └─5983</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a9ee3d3d0008f502ceb450f357fe5a678fc633935c73cb17258f727b13de87c3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/conta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:37:35</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5391</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T15:37:35+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;Running kube-proxy --cluster-cidr=10.42.0.0/16 --conntrack-max-per-core=0 --conntrack-tcp-timeout-close-wait=0s --connt&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 15:37:35 rke2-controller-2 rke2[5391]: time=&quot;2023-12-23T15:37:35+01:00&quot; level=info msg=&quot;certificate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CN=rke2,O=rke2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> signed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> by</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> CN=rke2-server-ca@1703340760:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> notBefore=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2023</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-12-23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 14</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:12:40</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +0000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UTC</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> notAfter=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">20</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">2&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:37:35</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5391</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T15:37:35+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;Updating TLS secret for kube-system/rke2-serving (count: 15): map[listener.cattle.io/cn-10.43.0.1:10.43.0.1 listener.ca&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 15:37:35 rke2-controller-2 rke2[5391]: time=&quot;2023-12-23T15:37:35+01:00&quot; level=info msg=&quot;Starting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /v1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Kind=Secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 15:37:35 rke2-controller-2 rke2[5391]: time=&quot;2023-12-23T15:37:35+01:00&quot; level=info msg=&quot;Starting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /v1,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Kind=Node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> controller&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 15:37:35 rke2-controller-2 rke2[5391]: time=&quot;2023-12-23T15:37:35+01:00&quot; level=info msg=&quot;Cluster</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> configmap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> already</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exists&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 15:37:35 rke2-controller-2 rke2[5391]: time=&quot;2023-12-23T15:37:35+01:00&quot; level=info msg=&quot;Reconciliation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ETCDSnapshotFile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> resources</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> complete&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 15:37:35 rke2-controller-2 rke2[5391]: time=&quot;2023-12-23T15:37:35+01:00&quot; level=info msg=&quot;Updating</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TLS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kube-system/rke2-serving</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (count: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">): map[listener.cattle.io/cn-10.43.0.1:10.43.0.1 listener.ca</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Dec </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:37:35 rke2-controller-2 rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5391</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]: time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2023-12-23T15:37:35+01:00&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> level</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">info msg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Labels and annotations have been set successfully on node: rke2-controller-2&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Dec </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:37:35 rke2-controller-2 rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5391</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]: time</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2023-12-23T15:37:35+01:00&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> level</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">info msg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Active TLS secret kube-system/rke2-serving (ver=4556) (count 15): map[listener.cattle.io/cn-10.43.0.1:10.43.0.1 listene&gt;</span></span></code></pre></div><h3 id="update-path-with-rke2-binaries-1" tabindex="-1">Update path with rke2 binaries <a class="header-anchor" href="#update-path-with-rke2-binaries-1" aria-label="Permalink to &quot;Update path with rke2 binaries&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;export KUBECONFIG=/etc/rancher/rke2/rke2.yaml&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;export PATH=${PATH}:/var/lib/rancher/rke2/bin&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;alias k=kubectl&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.bashrc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="check-controller-node-1" tabindex="-1">Check controller node <a class="header-anchor" href="#check-controller-node-1" aria-label="Permalink to &quot;Check controller node&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Wait for node to be ready</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wait</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --for=condition=Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --timeout=600s</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span></span></code></pre></div><p>Output:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ROLES</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                       AGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   VERSION</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    control-plane,etcd,master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   23</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   v1.29.0+rke2r1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-controller-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    control-plane,etcd,master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   69</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   v1.29.0+rke2r1</span></span></code></pre></div><h3 id="leave-controller-machine-1" tabindex="-1">Leave controller machine <a class="header-anchor" href="#leave-controller-machine-1" aria-label="Permalink to &quot;Leave controller machine&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span></span></code></pre></div><h2 id="join-worker-nodes" tabindex="-1">Join worker nodes <a class="header-anchor" href="#join-worker-nodes" aria-label="Permalink to &quot;Join worker nodes&quot;">​</a></h2><p>Repeat the following steps for <code>rke2-worker-1</code>, <code>rke2-worker-2</code>, and <code>rke2-worker-3</code></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span></span></code></pre></div><h3 id="download-installation-script-2" tabindex="-1">Download Installation script <a class="header-anchor" href="#download-installation-script-2" aria-label="Permalink to &quot;Download Installation script&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sfL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://get.rke2.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-install.sh</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-install.sh</span></span></code></pre></div><h3 id="configure-network-service-2" tabindex="-1">Configure network service <a class="header-anchor" href="#configure-network-service-2" aria-label="Permalink to &quot;Configure network service&quot;">​</a></h3><p><em>Enable the recommended IPv4 and/or IPv6 forwarding settings in the sysctl configuration files. Create a file named 90-rke2.conf in the /etc/sysctl.d/ directory</em></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/sysctl.d/90-rke2.conf</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv4.conf.all.forwarding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">net.ipv6.conf.all.forwarding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span></code></pre></div><h3 id="install-rke2-agent" tabindex="-1">Install RKE2 agent <a class="header-anchor" href="#install-rke2-agent" aria-label="Permalink to &quot;Install RKE2 agent&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_TYPE=agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_CHANNEL=latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_VERSION=v1.29.0+rke2r1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./rke2-install.sh</span></span></code></pre></div><p><em>All-in-one command</em></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -sfL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://get.rke2.io</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_TYPE=agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_CHANNEL=latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INSTALL_RKE2_VERSION=v1.29.0+rke2r1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span></code></pre></div><h3 id="configure-the-rke2-agent-service" tabindex="-1">Configure the rke2-agent service <a class="header-anchor" href="#configure-the-rke2-agent-service" aria-label="Permalink to &quot;Configure the rke2-agent service&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rancher/rke2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/rancher/rke2/config.yaml</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://192.168.205.2:9345</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">token:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> K100f5da8c469a178e8dc6c666ea0adf4c53beb16044ab38bad7f567dd807865be8::server:f11cfbbe06e12b28c57f3db2351046c2</span></span></code></pre></div><h3 id="start-the-service-2" tabindex="-1">Start the service <a class="header-anchor" href="#start-the-service-2" aria-label="Permalink to &quot;Start the service&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-agent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-agent</span></span></code></pre></div><h3 id="confirm-status-of-the-service-after-starting-it-2" tabindex="-1">Confirm status of the service after starting it <a class="header-anchor" href="#confirm-status-of-the-service-after-starting-it-2" aria-label="Permalink to &quot;Confirm status of the service after starting it&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-agent</span></span></code></pre></div><p>Output:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">●</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-agent.service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Rancher</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Kubernetes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Engine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (agent)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Loaded:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/usr/local/lib/systemd/system/rke2-agent.service; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preset:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Active:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> active</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (running) since Sat 2023-12-23 17:25:50 CET; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1min</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       Docs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/rancher/rke2#readme</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   Main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PID:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2519</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (rke2)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      Tasks:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 58</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     Memory:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 449.3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">M</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        CPU:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">min</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 36.528</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">s</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     CGroup:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /system.slice/rke2-agent.service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2519</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;/usr/local/bin/rke2 agent&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2535</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/agent/etc/containerd/config.toml</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/containerd/containerd.sock</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/containerd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --root</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/agent/containerd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2544</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubelet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --volume-plugin-dir=/var/lib/kubelet/volumeplugins</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --file-check-frequency=5s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --sync-frequency=30s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --address=0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --allowed-unsafe-sysctls=net.ipv4.ip_forward,net.ipv6.conf.all.forward</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ├─2612</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> c48a67dad1378a7bbdb664d073dac9254924c4098d1968197abcca6d9a6ff736</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/conta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             └─2673</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/rancher/rke2/data/v1.29.0-rke2r1-491b1a599021/bin/containerd-shim-runc-v2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> k8s.io</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 713</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">f5dfff501e61459967eb969da466ea7a60b2049bf3478df65606334440f60</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /run/k3s/conta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 17</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:25:48</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2519</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T17:25:48+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;Running kubelet --address=0.0.0.0 --allowed-unsafe-sysctls=net.ipv4.ip_forward,net.ipv6.conf.all.forwarding --alsologtostde&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 17:25:48 rke2-worker-1 rke2[2519]: time=&quot;2023-12-23T17:25:48+01:00&quot; level=info msg=&quot;Connecting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proxy&quot; url=&quot;wss://192.168.205.3:9345/v1-rke2/connect&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 17:25:48 rke2-worker-1 rke2[2519]: time=&quot;2023-12-23T17:25:48+01:00&quot; level=info msg=&quot;Connecting</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proxy&quot; url=&quot;wss://192.168.205.2:9345/v1-rke2/connect&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 17:25:49 rke2-worker-1 rke2[2519]: time=&quot;2023-12-23T17:25:49+01:00&quot; level=info msg=&quot;Running</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kube-proxy</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cluster-cidr=10.42.0.0/16</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --conntrack-max-per-core=0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --conntrack-tcp-timeout-close-wait=0s</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --conntrack</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 17</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:25:50</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2519</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T17:25:50+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;Failed to set annotations and labels on node rke2-worker-1: Operation cannot be fulfilled on nodes </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rke2-worker-1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: the o&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 17:25:50 rke2-worker-1 rke2[2519]: time=&quot;2023-12-23T17:25:50+01:00&quot; level=info msg=&quot;Failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> annotations</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> labels</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Operation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> be</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fulfilled</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rke2-worker-1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> o</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Dec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 23</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 17</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:25:50</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2519</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> time=&quot;2023-12-23T17:25:50+01:00&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level=info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> msg=&quot;Failed to set annotations and labels on node rke2-worker-1: Operation cannot be fulfilled on nodes </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">rke2-worker-1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">: the o&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 17:25:50 rke2-worker-1 rke2[2519]: time=&quot;2023-12-23T17:25:50+01:00&quot; level=info msg=&quot;Annotations</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> labels</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> have</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 17:25:50 rke2-worker-1 rke2[2519]: time=&quot;2023-12-23T17:25:50+01:00&quot; level=info msg=&quot;rke2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> and</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> running&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Dec 23 17:25:50 rke2-worker-1 systemd[1]: Started rke2-agent.service - Rancher Kubernetes Engine v2 (agent).</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span></span></code></pre></div><h3 id="check-cluster-nodes" tabindex="-1">Check cluster nodes <a class="header-anchor" href="#check-cluster-nodes" aria-label="Permalink to &quot;Check cluster nodes&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Wait for node to be ready</span></span>
<span class="line highlighted"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wait</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --for=condition=Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --all</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --timeout=600s</span></span></code></pre></div><p>Output</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NAME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   ROLES</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                       AGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     VERSION</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    control-plane,etcd,master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   159</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    v1.29.0+rke2r1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-controller-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    control-plane,etcd,master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   137</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    v1.29.0+rke2r1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-controller-3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Ready</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    control-plane,etcd,master</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">m50s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   v1.29.0+rke2r1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-worker-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Ready</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                      28</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     v1.29.0+rke2r1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-worker-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Ready</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                      19</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     v1.29.0+rke2r1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rke2-worker-3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Ready</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">non</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                      12</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     v1.29.0+rke2r1</span></span></code></pre></div><h2 id="cleanup" tabindex="-1">Cleanup <a class="header-anchor" href="#cleanup" aria-label="Permalink to &quot;Cleanup&quot;">​</a></h2><p>Stop Multipass machines</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-3</span></span></code></pre></div><p>Delete Multipass machines</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">multipass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-controller-3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rke2-worker-3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --purge</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-48f9bb55><!--[--><!--]--><!----><nav class="prev-next" data-v-48f9bb55><div class="pager" data-v-48f9bb55><a class="VPLink link pager-link prev" href="/blog/kubernetes/rke2/" data-v-48f9bb55><!--[--><span class="desc" data-v-48f9bb55>Previous page</span><span class="title" data-v-48f9bb55>Overview</span><!--]--></a></div><div class="pager" data-v-48f9bb55><a class="VPLink link pager-link next" href="/blog/kubernetes/k3s/" data-v-48f9bb55><!--[--><span class="desc" data-v-48f9bb55>Next page</span><span class="title" data-v-48f9bb55>K3s</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!----><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"blog_ai_getting-started_index.md\":\"lu9kFEcs\",\"about.md\":\"VKfYg7vR\",\"blog_cloud-computing_getting-started_index.md\":\"Adwpim36\",\"blog_index.md\":\"6z5cXfMV\",\"blog_kubernetes_getting-started_index.md\":\"ddYa81zE\",\"blog_kubernetes_k3s_index.md\":\"G9G96nqL\",\"blog_kubernetes_kubeadm_index.md\":\"Yn5BI6PM\",\"de_blog_devsecops_index.md\":\"gS1geRE_\",\"blog_linux_index.md\":\"PdX2vUp9\",\"blog_linux_getting-started_index.md\":\"pqAZECLY\",\"blog_kubernetes_minikube_index.md\":\"tmGZ69BT\",\"blog_virtualization_getting-started_index.md\":\"2iXW3_7R\",\"blog_virtualization_index.md\":\"GQKgeuC5\",\"blog_virtualization_lxd_index.md\":\"St9XsuKo\",\"blog_virtualization_firecracker_index.md\":\"6E6KhEtB\",\"blog_virtualization_multipass_index.md\":\"ylJQGHAH\",\"de_about.md\":\"j-arAAmH\",\"de_blog_ai_getting-started_index.md\":\"tDYZ_m2x\",\"de_blog_ai_index.md\":\"0GrURU6j\",\"de_blog_cloud-computing_getting-started_index.md\":\"qt1d0GNv\",\"de_blog_linux_ubuntu_index.md\":\"7D5CmhI_\",\"de_blog_cloud-computing_index.md\":\"t6EmTzJL\",\"de_blog_index.md\":\"L7B3mDG5\",\"de_blog_kubernetes_getting-started_index.md\":\"mTurdBnz\",\"de_blog_kubernetes_index.md\":\"s22CqA38\",\"de_blog_devsecops_getting-started_index.md\":\"yQ5aIXrk\",\"blog_linux_ubuntu_index.md\":\"xjvG8mYu\",\"de_blog_kubernetes_kubeadm_index.md\":\"JuuwwRyB\",\"de_blog_kubernetes_minikube_index.md\":\"VeGwLuIE\",\"de_blog_kubernetes_rke2_setup-multi-node-rke2-v1.29.0-cluster-canonical-multipass.md\":\"7FCE4ljU\",\"de_blog_linux_getting-started_index.md\":\"sZZZM0Z0\",\"de_blog_linux_index.md\":\"fOHn9LQm\",\"de_blog_kubernetes_rke2_index.md\":\"sHN_gq8t\",\"de_blog_kubernetes_k3s_index.md\":\"P5LhoX6B\",\"de_blog_linux_raspberrypi_index.md\":\"UAj3BVad\",\"de_blog_virtualization_getting-started_index.md\":\"zX14PoH6\",\"de_index.md\":\"dZeVy7dM\",\"de_blog_virtualization_multipass_index.md\":\"1xQZaRTx\",\"de_blog_virtualization_index.md\":\"95GzH1EI\",\"de_scripts_index.md\":\"UQDSaHJv\",\"de_blog_virtualization_lxd_index.md\":\"TPxZ8cNa\",\"de_scripts_multi-node-rke2-cluster-multipass.md\":\"b64BfaJN\",\"index.md\":\"OZTrec9j\",\"scripts_multi-node-rke2-cluster-multipass.md\":\"waR-u60i\",\"scripts_index.md\":\"iuRnrNxv\",\"blog_cloud-computing_index.md\":\"ntMcC13A\",\"blog_devsecops_getting-started_index.md\":\"GUZFrzl5\",\"blog_devsecops_index.md\":\"5irN03J2\",\"blog_ai_index.md\":\"5i_E_aYV\",\"de_blog_virtualization_firecracker_index.md\":\"SfeGYNUe\",\"blog_linux_raspberrypi_index.md\":\"TUKPb0q6\",\"blog_kubernetes_index.md\":\"u_IcKdBc\",\"blog_kubernetes_rke2_setup-multi-node-rke2-v1.29.0-cluster-canonical-multipass.md\":\"TzA5BMCU\",\"blog_kubernetes_rke2_index.md\":\"qwQEKKqY\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en\",\"dir\":\"ltr\",\"title\":\"kaiwedekind.dev\",\"description\":\"My blog\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"About me\",\"link\":\"/about\"}],\"sidebar\":[{\"text\":\"Virtualization\",\"collapsed\":true,\"items\":[{\"text\":\"Getting Started\",\"link\":\"/blog/virtualization/getting-started/\"},{\"text\":\"LXD\",\"link\":\"/blog/virtualization/lxd/\"},{\"text\":\"Multipass\",\"link\":\"/blog/virtualization/multipass/\"},{\"text\":\"Firecracker\",\"link\":\"/blog/virtualization/firecracker/\"}]},{\"text\":\"Kubernetes\",\"collapsed\":true,\"items\":[{\"text\":\"Getting Started\",\"link\":\"/blog/kubernetes/getting-started/\"},{\"text\":\"RKE2\",\"collapsed\":true,\"items\":[{\"text\":\"Overview\",\"link\":\"/blog/kubernetes/rke2/\"},{\"text\":\"Setup Multi Node RKE2 v1.29.0 cluster with Canonical Multipass\",\"link\":\"/blog/kubernetes/rke2/setup-multi-node-rke2-v1.29.0-cluster-canonical-multipass\"}]},{\"text\":\"K3s\",\"link\":\"/blog/kubernetes/k3s/\"},{\"text\":\"kubeadm\",\"link\":\"/blog/kubernetes/kubeadm/\"},{\"text\":\"minikube\",\"link\":\"/blog/kubernetes/minikube/\"}]},{\"text\":\"Linux\",\"collapsed\":true,\"items\":[{\"text\":\"Getting Started\",\"link\":\"/blog/linux/getting-started/\"},{\"text\":\"Ubuntu\",\"link\":\"/blog/linux/ubuntu/\"},{\"text\":\"Raspberry Pi\",\"link\":\"/blog/linux/raspberrypi/\"}]},{\"text\":\"Cloud Computing\",\"collapsed\":true,\"items\":[{\"text\":\"Getting Started\",\"link\":\"/blog/cloud-computing/getting-started/\"}]},{\"text\":\"DevSecOps\",\"collapsed\":true,\"items\":[{\"text\":\"Getting Started\",\"link\":\"/blog/devsecops/getting-started/\"}]},{\"text\":\"AI\",\"collapsed\":true,\"items\":[{\"text\":\"Getting Started\",\"link\":\"/blog/ai/getting-started/\"}]},{\"text\":\"Scripts\",\"collapsed\":true,\"items\":[{\"text\":\"Overview\",\"link\":\"/scripts/\"}]},{\"text\":\"About me\",\"link\":\"/about\"}]},\"locales\":{\"root\":{\"label\":\"English\",\"lang\":\"en\"},\"de\":{\"label\":\"German\",\"lang\":\"de\",\"link\":\"/de/\",\"themeConfig\":{\"nav\":[{\"text\":\"Startseite\",\"link\":\"/de/\"},{\"text\":\"Über mich\",\"link\":\"/de/about\"}],\"sidebar\":[{\"text\":\"Virtualisierung\",\"collapsed\":true,\"items\":[{\"text\":\"Erste Schritte\",\"link\":\"/de/blog/virtualization/getting-started/\"},{\"text\":\"LXD\",\"link\":\"/de/blog/virtualization/lxd/\"},{\"text\":\"Multipass\",\"link\":\"/de/blog/virtualization/multipass/\"},{\"text\":\"Firecracker\",\"link\":\"/de/blog/virtualization/firecracker/\"}]},{\"text\":\"Kubernetes\",\"collapsed\":true,\"items\":[{\"text\":\"Erste Schritte\",\"link\":\"/de/blog/kubernetes/getting-started/\"},{\"text\":\"RKE2\",\"link\":\"/de/blog/kubernetes/rke2/\"},{\"text\":\"K3s\",\"link\":\"/de/blog/kubernetes/k3s/\"},{\"text\":\"kubeadm\",\"link\":\"/de/blog/kubernetes/kubeadm/\"},{\"text\":\"minikube\",\"link\":\"/de/blog/kubernetes/minikube/\"}]},{\"text\":\"Linux\",\"collapsed\":true,\"items\":[{\"text\":\"Erste Schritte\",\"link\":\"/de/blog/linux/getting-started/\"},{\"text\":\"Ubuntu\",\"link\":\"/de/blog/linux/ubuntu/\"},{\"text\":\"Raspberry Pi\",\"link\":\"/de/blog/linux/raspberrypi/\"}]},{\"text\":\"Cloud Computing\",\"collapsed\":true,\"items\":[{\"text\":\"Erste Schritte\",\"link\":\"/de/blog/cloud-computing/getting-started/\"}]},{\"text\":\"DevSecOps\",\"collapsed\":true,\"items\":[{\"text\":\"Erste Schritte\",\"link\":\"/de/blog/devsecops/getting-started/\"}]},{\"text\":\"Künstliche Intelligenz\",\"collapsed\":true,\"items\":[{\"text\":\"Erste Schritte\",\"link\":\"/de/blog/ai/getting-started/\"}]},{\"text\":\"Skripts\",\"collapsed\":true,\"items\":[{\"text\":\"Übersicht\",\"link\":\"/de/scripts/\"}]},{\"text\":\"About me\",\"link\":\"/about\"}]}}},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>